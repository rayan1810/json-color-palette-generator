{"ast":null,"code":"import { canUseDOM } from 'fbjs/lib/ExecutionEnvironment';\nvar focusVisibleAttributeName = 'data-focusvisible-polyfill';\nvar rule = \":focus:not([\" + focusVisibleAttributeName + \"]){outline: none;}\";\n\nvar modality = function modality(insertRule) {\n  var isValidFocusTarget = function isValidFocusTarget(el) {\n    if (el && el !== document && el.nodeName !== 'HTML' && el.nodeName !== 'BODY' && 'classList' in el && 'contains' in el.classList) {\n      return true;\n    }\n\n    return false;\n  };\n\n  var focusTriggersKeyboardModality = function focusTriggersKeyboardModality(el) {\n    var type = el.type;\n    var tagName = el.tagName;\n    var isReadOnly = el.readOnly;\n\n    if (tagName === 'INPUT' && inputTypesWhitelist[type] && !isReadOnly) {\n      return true;\n    }\n\n    if (tagName === 'TEXTAREA' && !isReadOnly) {\n      return true;\n    }\n\n    if (el.isContentEditable) {\n      return true;\n    }\n\n    return false;\n  };\n\n  var addFocusVisibleAttribute = function addFocusVisibleAttribute(el) {\n    if (el.hasAttribute(focusVisibleAttributeName)) {\n      return;\n    }\n\n    el.setAttribute(focusVisibleAttributeName, true);\n  };\n\n  var removeFocusVisibleAttribute = function removeFocusVisibleAttribute(el) {\n    el.removeAttribute(focusVisibleAttributeName);\n  };\n\n  var removeAllFocusVisibleAttributes = function removeAllFocusVisibleAttributes() {\n    var list = document.querySelectorAll(\"[\" + focusVisibleAttributeName + \"]\");\n\n    for (var i = 0; i < list.length; i += 1) {\n      removeFocusVisibleAttribute(list[i]);\n    }\n  };\n\n  var onKeyDown = function onKeyDown(e) {\n    if (e.key !== 'Tab' && (e.metaKey || e.altKey || e.ctrlKey || e.shiftKey)) {\n      return;\n    }\n\n    if (isValidFocusTarget(document.activeElement)) {\n      addFocusVisibleAttribute(document.activeElement);\n    }\n\n    hadKeyboardEvent = true;\n  };\n\n  var onPointerDown = function onPointerDown(e) {\n    if (hadKeyboardEvent === true) {\n      removeAllFocusVisibleAttributes();\n    }\n\n    hadKeyboardEvent = false;\n  };\n\n  var onFocus = function onFocus(e) {\n    if (!isValidFocusTarget(e.target)) {\n      return;\n    }\n\n    if (hadKeyboardEvent || focusTriggersKeyboardModality(e.target)) {\n      addFocusVisibleAttribute(e.target);\n    }\n  };\n\n  var onBlur = function onBlur(e) {\n    if (!isValidFocusTarget(e.target)) {\n      return;\n    }\n\n    if (e.target.hasAttribute(focusVisibleAttributeName)) {\n      hadFocusVisibleRecently = true;\n      window.clearTimeout(hadFocusVisibleRecentlyTimeout);\n      hadFocusVisibleRecentlyTimeout = window.setTimeout(function () {\n        hadFocusVisibleRecently = false;\n        window.clearTimeout(hadFocusVisibleRecentlyTimeout);\n      }, 100);\n      removeFocusVisibleAttribute(e.target);\n    }\n  };\n\n  var onVisibilityChange = function onVisibilityChange(e) {\n    if (document.visibilityState === 'hidden') {\n      if (hadFocusVisibleRecently) {\n        hadKeyboardEvent = true;\n      }\n\n      addInitialPointerMoveListeners();\n    }\n  };\n\n  var addInitialPointerMoveListeners = function addInitialPointerMoveListeners() {\n    document.addEventListener('mousemove', onInitialPointerMove);\n    document.addEventListener('mousedown', onInitialPointerMove);\n    document.addEventListener('mouseup', onInitialPointerMove);\n    document.addEventListener('pointermove', onInitialPointerMove);\n    document.addEventListener('pointerdown', onInitialPointerMove);\n    document.addEventListener('pointerup', onInitialPointerMove);\n    document.addEventListener('touchmove', onInitialPointerMove);\n    document.addEventListener('touchstart', onInitialPointerMove);\n    document.addEventListener('touchend', onInitialPointerMove);\n  };\n\n  var removeInitialPointerMoveListeners = function removeInitialPointerMoveListeners() {\n    document.removeEventListener('mousemove', onInitialPointerMove);\n    document.removeEventListener('mousedown', onInitialPointerMove);\n    document.removeEventListener('mouseup', onInitialPointerMove);\n    document.removeEventListener('pointermove', onInitialPointerMove);\n    document.removeEventListener('pointerdown', onInitialPointerMove);\n    document.removeEventListener('pointerup', onInitialPointerMove);\n    document.removeEventListener('touchmove', onInitialPointerMove);\n    document.removeEventListener('touchstart', onInitialPointerMove);\n    document.removeEventListener('touchend', onInitialPointerMove);\n  };\n\n  var onInitialPointerMove = function onInitialPointerMove(e) {\n    if (e.target.nodeName === 'HTML') {\n      return;\n    }\n\n    hadKeyboardEvent = false;\n    removeInitialPointerMoveListeners();\n  };\n\n  insertRule(rule);\n\n  if (!canUseDOM) {\n    return;\n  }\n\n  var hadKeyboardEvent = true;\n  var hadFocusVisibleRecently = false;\n  var hadFocusVisibleRecentlyTimeout = null;\n  var inputTypesWhitelist = {\n    text: true,\n    search: true,\n    url: true,\n    tel: true,\n    email: true,\n    password: true,\n    number: true,\n    date: true,\n    month: true,\n    week: true,\n    time: true,\n    datetime: true,\n    'datetime-local': true\n  };\n  document.addEventListener('keydown', onKeyDown, true);\n  document.addEventListener('mousedown', onPointerDown, true);\n  document.addEventListener('pointerdown', onPointerDown, true);\n  document.addEventListener('touchstart', onPointerDown, true);\n  document.addEventListener('focus', onFocus, true);\n  document.addEventListener('blur', onBlur, true);\n  document.addEventListener('visibilitychange', onVisibilityChange, true);\n  addInitialPointerMoveListeners();\n};\n\nexport default modality;\n;\n;\n\n(function () {\n  var _a, _b;\n\n  if (typeof self !== 'undefined' && '$RefreshHelpers$' in self) {\n    var currentExports = __webpack_module__.exports;\n    var prevExports = (_b = (_a = __webpack_module__.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n    self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, __webpack_module__.id);\n\n    if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n      __webpack_module__.hot.dispose(function (data) {\n        data.prevExports = currentExports;\n      });\n\n      import.meta.webpackHot.accept();\n\n      if (prevExports !== null) {\n        if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n          __webpack_module__.hot.invalidate();\n        } else {\n          self.$RefreshHelpers$.scheduleUpdate();\n        }\n      }\n    } else {\n      var isNoLongerABoundary = prevExports !== null;\n\n      if (isNoLongerABoundary) {\n        __webpack_module__.hot.invalidate();\n      }\n    }\n  }\n})();","map":{"version":3,"sources":["C:\\projects\\json-color-palette-generator\\node_modules\\react-native-web\\dist\\exports\\StyleSheet\\modality.js"],"names":["canUseDOM","focusVisibleAttributeName","rule","modality","insertRule","hadKeyboardEvent","hadFocusVisibleRecently","hadFocusVisibleRecentlyTimeout","inputTypesWhitelist","text","search","url","tel","email","password","number","date","month","week","time","datetime","isValidFocusTarget","el","document","nodeName","classList","focusTriggersKeyboardModality","type","tagName","isReadOnly","readOnly","isContentEditable","addFocusVisibleAttribute","hasAttribute","setAttribute","removeFocusVisibleAttribute","removeAttribute","removeAllFocusVisibleAttributes","list","querySelectorAll","i","length","onKeyDown","e","key","metaKey","altKey","ctrlKey","shiftKey","activeElement","onPointerDown","onFocus","target","onBlur","window","clearTimeout","setTimeout","onVisibilityChange","visibilityState","addInitialPointerMoveListeners","addEventListener","onInitialPointerMove","removeInitialPointerMoveListeners","removeEventListener"],"mappings":"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","sourcesContent":["/**\n * Adapts focus styles based on the user's active input modality (i.e., how\n * they are interacting with the UI right now).\n *\n * Focus styles are only relevant when using the keyboard to interact with the\n * page. If we only show the focus ring when relevant, we can avoid user\n * confusion without compromising accessibility.\n *\n * The script uses two heuristics to determine whether the keyboard is being used:\n *\n * 1. a keydown event occurred immediately before a focus event;\n * 2. a focus event happened on an element which requires keyboard interaction (e.g., a text field);\n *\n * This software or document includes material copied from or derived from https://github.com/WICG/focus-visible.\n * Copyright © 2018 W3C® (MIT, ERCIM, Keio, Beihang).\n * W3C Software Notice and License: https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n *\n * \n */\nimport { canUseDOM } from 'fbjs/lib/ExecutionEnvironment';\nvar focusVisibleAttributeName = 'data-focusvisible-polyfill';\nvar rule = \":focus:not([\" + focusVisibleAttributeName + \"]){outline: none;}\";\n\nvar modality = function modality(insertRule) {\n  insertRule(rule);\n\n  if (!canUseDOM) {\n    return;\n  }\n\n  var hadKeyboardEvent = true;\n  var hadFocusVisibleRecently = false;\n  var hadFocusVisibleRecentlyTimeout = null;\n  var inputTypesWhitelist = {\n    text: true,\n    search: true,\n    url: true,\n    tel: true,\n    email: true,\n    password: true,\n    number: true,\n    date: true,\n    month: true,\n    week: true,\n    time: true,\n    datetime: true,\n    'datetime-local': true\n  };\n  /**\n   * Helper function for legacy browsers and iframes which sometimes focus\n   * elements like document, body, and non-interactive SVG.\n   */\n\n  function isValidFocusTarget(el) {\n    if (el && el !== document && el.nodeName !== 'HTML' && el.nodeName !== 'BODY' && 'classList' in el && 'contains' in el.classList) {\n      return true;\n    }\n\n    return false;\n  }\n  /**\n   * Computes whether the given element should automatically trigger the\n   * `focus-visible` attribute being added, i.e. whether it should always match\n   * `:focus-visible` when focused.\n   */\n\n\n  function focusTriggersKeyboardModality(el) {\n    var type = el.type;\n    var tagName = el.tagName;\n    var isReadOnly = el.readOnly;\n\n    if (tagName === 'INPUT' && inputTypesWhitelist[type] && !isReadOnly) {\n      return true;\n    }\n\n    if (tagName === 'TEXTAREA' && !isReadOnly) {\n      return true;\n    }\n\n    if (el.isContentEditable) {\n      return true;\n    }\n\n    return false;\n  }\n  /**\n   * Add the `focus-visible` attribute to the given element if it was not added by\n   * the author.\n   */\n\n\n  function addFocusVisibleAttribute(el) {\n    if (el.hasAttribute(focusVisibleAttributeName)) {\n      return;\n    }\n\n    el.setAttribute(focusVisibleAttributeName, true);\n  }\n  /**\n   * Remove the `focus-visible` attribute from the given element if it was not\n   * originally added by the author.\n   */\n\n\n  function removeFocusVisibleAttribute(el) {\n    el.removeAttribute(focusVisibleAttributeName);\n  }\n  /**\n   * Remove the `focus-visible` attribute from all elements in the document.\n   */\n\n\n  function removeAllFocusVisibleAttributes() {\n    var list = document.querySelectorAll(\"[\" + focusVisibleAttributeName + \"]\");\n\n    for (var i = 0; i < list.length; i += 1) {\n      removeFocusVisibleAttribute(list[i]);\n    }\n  }\n  /**\n   * Treat `keydown` as a signal that the user is in keyboard modality.\n   * Apply `focus-visible` to any current active element and keep track\n   * of our keyboard modality state with `hadKeyboardEvent`.\n   */\n\n\n  function onKeyDown(e) {\n    if (e.key !== 'Tab' && (e.metaKey || e.altKey || e.ctrlKey || e.shiftKey)) {\n      return;\n    }\n\n    if (isValidFocusTarget(document.activeElement)) {\n      addFocusVisibleAttribute(document.activeElement);\n    }\n\n    hadKeyboardEvent = true;\n  }\n  /**\n   * If at any point a user clicks with a pointing device, ensure that we change\n   * the modality away from keyboard.\n   * This avoids the situation where a user presses a key on an already focused\n   * element, and then clicks on a different element, focusing it with a\n   * pointing device, while we still think we're in keyboard modality.\n   * It also avoids the situation where a user presses on an element within a\n   * previously keyboard-focused element (i.e., `e.target` is not the previously\n   * focused element, but one of its descendants) and we need to remove the\n   * focus ring because a `blur` event doesn't occur.\n   */\n\n\n  function onPointerDown(e) {\n    if (hadKeyboardEvent === true) {\n      removeAllFocusVisibleAttributes();\n    }\n\n    hadKeyboardEvent = false;\n  }\n  /**\n   * On `focus`, add the `focus-visible` attribute to the target if:\n   * - the target received focus as a result of keyboard navigation, or\n   * - the event target is an element that will likely require interaction\n   *   via the keyboard (e.g. a text box)\n   */\n\n\n  function onFocus(e) {\n    // Prevent IE from focusing the document or HTML element.\n    if (!isValidFocusTarget(e.target)) {\n      return;\n    }\n\n    if (hadKeyboardEvent || focusTriggersKeyboardModality(e.target)) {\n      addFocusVisibleAttribute(e.target);\n    }\n  }\n  /**\n   * On `blur`, remove the `focus-visible` attribute from the target.\n   */\n\n\n  function onBlur(e) {\n    if (!isValidFocusTarget(e.target)) {\n      return;\n    }\n\n    if (e.target.hasAttribute(focusVisibleAttributeName)) {\n      // To detect a tab/window switch, we look for a blur event followed\n      // rapidly by a visibility change.\n      // If we don't see a visibility change within 100ms, it's probably a\n      // regular focus change.\n      hadFocusVisibleRecently = true;\n      window.clearTimeout(hadFocusVisibleRecentlyTimeout);\n      hadFocusVisibleRecentlyTimeout = window.setTimeout(function () {\n        hadFocusVisibleRecently = false;\n        window.clearTimeout(hadFocusVisibleRecentlyTimeout);\n      }, 100);\n      removeFocusVisibleAttribute(e.target);\n    }\n  }\n  /**\n   * If the user changes tabs, keep track of whether or not the previously\n   * focused element had the focus-visible attribute.\n   */\n\n\n  function onVisibilityChange(e) {\n    if (document.visibilityState === 'hidden') {\n      // If the tab becomes active again, the browser will handle calling focus\n      // on the element (Safari actually calls it twice).\n      // If this tab change caused a blur on an element with focus-visible,\n      // re-apply the attribute when the user switches back to the tab.\n      if (hadFocusVisibleRecently) {\n        hadKeyboardEvent = true;\n      }\n\n      addInitialPointerMoveListeners();\n    }\n  }\n  /**\n   * Add a group of listeners to detect usage of any pointing devices.\n   * These listeners will be added when the polyfill first loads, and anytime\n   * the window is blurred, so that they are active when the window regains\n   * focus.\n   */\n\n\n  function addInitialPointerMoveListeners() {\n    document.addEventListener('mousemove', onInitialPointerMove);\n    document.addEventListener('mousedown', onInitialPointerMove);\n    document.addEventListener('mouseup', onInitialPointerMove);\n    document.addEventListener('pointermove', onInitialPointerMove);\n    document.addEventListener('pointerdown', onInitialPointerMove);\n    document.addEventListener('pointerup', onInitialPointerMove);\n    document.addEventListener('touchmove', onInitialPointerMove);\n    document.addEventListener('touchstart', onInitialPointerMove);\n    document.addEventListener('touchend', onInitialPointerMove);\n  }\n\n  function removeInitialPointerMoveListeners() {\n    document.removeEventListener('mousemove', onInitialPointerMove);\n    document.removeEventListener('mousedown', onInitialPointerMove);\n    document.removeEventListener('mouseup', onInitialPointerMove);\n    document.removeEventListener('pointermove', onInitialPointerMove);\n    document.removeEventListener('pointerdown', onInitialPointerMove);\n    document.removeEventListener('pointerup', onInitialPointerMove);\n    document.removeEventListener('touchmove', onInitialPointerMove);\n    document.removeEventListener('touchstart', onInitialPointerMove);\n    document.removeEventListener('touchend', onInitialPointerMove);\n  }\n  /**\n   * When the polfyill first loads, assume the user is in keyboard modality.\n   * If any event is received from a pointing device (e.g. mouse, pointer,\n   * touch), turn off keyboard modality.\n   * This accounts for situations where focus enters the page from the URL bar.\n   */\n\n\n  function onInitialPointerMove(e) {\n    // Work around a Safari quirk that fires a mousemove on <html> whenever the\n    // window blurs, even if you're tabbing out of the page. ¯\\_(ツ)_/¯\n    if (e.target.nodeName === 'HTML') {\n      return;\n    }\n\n    hadKeyboardEvent = false;\n    removeInitialPointerMoveListeners();\n  }\n\n  document.addEventListener('keydown', onKeyDown, true);\n  document.addEventListener('mousedown', onPointerDown, true);\n  document.addEventListener('pointerdown', onPointerDown, true);\n  document.addEventListener('touchstart', onPointerDown, true);\n  document.addEventListener('focus', onFocus, true);\n  document.addEventListener('blur', onBlur, true);\n  document.addEventListener('visibilitychange', onVisibilityChange, true);\n  addInitialPointerMoveListeners();\n};\n\nexport default modality;"]},"metadata":{},"sourceType":"module"}